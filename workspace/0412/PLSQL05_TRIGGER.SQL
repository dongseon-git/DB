--BEFORE 트리거
--STEP1. CTAS로 EMP;
--CREATE TABLE EMP_TRG
--AS
--SELECT * FROM EMP;
--select * from emp_trg;
--STEP 2. TRIGGER 생성
CREATE OR REPLACE TRIGGER TRG_EMP_NODM_WEEKEND
BEFORE 
INSERT OR UPDATE OR DELETE ON EMP_TRG
DECLARE
BEGIN
IF TO_CHAR(SYSDATE,'DY')IN('토','일') THEN
     IF INSERTING THEN
        RAISE_APPLICATION_ERROR(-20000, '주말 사원정보 추가불가');
     ELSIF UPDATING THEN
        RAISE_APPLICATION_ERROR(-20001,'주말 사원정보 수정 불가');
     ELSIF DELETING THEN
        RAISE_APPLICATION_ERROR(-20002,'주말 사원정보 삭제 불가');
     ELSE
        RAISE_APPLICATION_ERROR(-20003,'주말 사원정보 변경 불가');
       END IF;
END IF;
END;
/
SELECT TO_CHAR(SYSDATE,'DY') FROM DUAL;

SELECT * FROM EMP_TRG;


